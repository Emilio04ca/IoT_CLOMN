<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous">
    <title>Registros</title>
  
</head>
<style>
    .center {
  display: block;
  margin-left: auto;
  margin-right: auto;
  width:200px; 
  height:200px;
}

</style>
<!-- amCharts javascript sources -->
<script type="text/javascript" src="https://www.amcharts.com/lib/3/amcharts.js"></script>
<script type="text/javascript" src="https://www.amcharts.com/lib/3/gauge.js"></script>
<script type="text/javascript" src="https://www.amcharts.com/lib/3/themes/dark.js"></script>

<script type="text/javascript">
  function actualizar(){location.reload(true);}
//Funci√≥n para actualizar cada 4 segundos(3000 milisegundos)
  setInterval("actualizar()",2000);
</script>

<!-- amCharts javascript code -->
<% var contador =0;
        for(var i=0; i < tablas.length; i++){
          var porcentaje= tablas[i].Porcentaje;
          var presencia = tablas[i].Presencia
        }
%>

</head>
<script>
  var datos = "<%= porcentaje %>";
  AmCharts.makeChart("chartdiv",
    {
      type: "gauge",
      marginBottom: 20,
      marginTop: 40,
      startDuration: 0,
      fontSize: 13,
      theme: "dark",
      arrows: [
        {
          id: "GaugeArrow-1",
          "value": datos
        }
      ],
      axes: [
        {
          axisThickness: 1,
          bottomText: datos + " % de la cisterna",
          bottomTextYOffset: -20,
          endValue: 100,
          id: "GaugeAxis-1",
          valueInterval: 5,
          bands: [
            {
              alpha: 0.7,
              color: "#00CC00",
              endValue: 70,
              id: "GaugeBand-1",
              innerRadius: "80%",
              startValue: 0
            },
            {
              alpha: 0.7,
              color: "#ffac29",
              endValue: 90,
              id: "GaugeBand-2",
              innerRadius: "80%",
              startValue: 70
            },
            {
              alpha: 0.7,
              color: "#ea3838",
              endValue: 100,
              id: "GaugeBand-3",
              innerRadius: "80%",
              startValue: 90
            }
          ]
        }
      ],
      allLabels: [],
      balloon: {},
      titles: []
    }
  );
</script>
<body>
  <tr></tr>
      <div id="numero">  <%= tablas[1].Porcentaje%></div>
        <%
          var valores = tablas[1].Porcentaje;
        %>
  </tr>
  <div class="container">
    <div class="row g-5">
        <div class="col-md-4">
            <table class="table table-bordered tabla-hover table-dark table table-striped" >
                <thead>
                    <tr>
                        <th>Id_Modulo</th>
                        <th>Presencia</th>
                    </tr>
                </thead>
            <tbody>
                    <tr>
                        <td><%= porcentaje %></td>
                        <td><%= presencia  %></td>
                    </tr>
            </tbody>
        </table>
    </div>
    <div class="col-md-8">
        <div class="position-sticky" style="top: 2rem;">
            <div class="p-4 mb-8 bg-light rounded">
                <div class="card">
                    <div class="card-body">
                      <div id="chartdiv" style="width: 100%; height: 450px; background-color: #282828;" class="center" ></div>    
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
</div>

</body> 
</html>